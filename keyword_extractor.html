<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Palavras-Chave</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #1c1c1c;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInUp 1s ease-out;
        }

        .title {
            font-size: 3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #7f8c8d;
            font-weight: 400;
        }

        /* Input Section */
        .input-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            animation: scaleIn 0.8s ease-out 0.3s both;
        }

        .text-area {
            width: 100%;
            min-height: 200px;
            border: 2px solid #e8ecf0;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: #fafbfc;
        }

        .text-area:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .text-area::placeholder {
            color: #95a5a6;
            font-style: italic;
        }

        .text-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            font-size: 14px;
            color: #7f8c8d;
            animation: fadeIn 1s ease-out 0.5s both;
        }

        .counters {
            display: flex;
            gap: 20px;
        }

        .counter {
            background: #e8f4fd;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 500;
            color: #2980b9;
        }

        .language-support {
            font-style: italic;
        }

        /* Slider Section */
        .slider-section {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            animation: slideInLeft 0.8s ease-out 0.5s both;
        }

        .slider-label {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .slider-container {
            position: relative;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e8ecf0;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        .slider-value {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
            font-weight: 500;
            font-size: 14px;
        }

        /* Extract Button */
        .extract-btn {
            width: 100%;
            padding: 18px 30px;
            font-size: 18px;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
            animation: slideInRight 0.8s ease-out 0.7s both;
            position: relative;
            overflow: hidden;
        }

        .extract-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .extract-btn:active {
            transform: translateY(0);
        }

        .extract-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        /* Results Section */
        .results-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
        }

        .results-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
        }

        .keywords-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .keyword-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }

        .keyword-card.show {
            opacity: 1;
            transform: translateY(0);
        }

        .keyword-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .keyword-rank {
            font-size: 14px;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .keyword-text {
            font-size: 18px;
            font-weight: 500;
            color: #2c3e50;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            border: 2px solid #667eea;
            background: transparent;
            color: #667eea;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #7f8c8d;
            font-size: 14px;
            animation: fadeIn 1s ease-out 1s both;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .title {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .input-section,
            .slider-section {
                padding: 20px;
            }

            .text-info {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }

            .counters {
                gap: 10px;
            }

            .keywords-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">Extrator de Palavras-Chave</h1>
            <p class="subtitle">Extraia as palavras mais importantes do seu texto</p>
        </header>

        <!-- Input Section -->
        <section class="input-section">
            <textarea 
                class="text-area" 
                id="textInput" 
                placeholder="Cole seu texto aqui..."
                rows="8"
            ></textarea>
            <div class="text-info">
                <div class="counters">
                    <span class="counter">
                        <span id="charCount">0</span> caracteres
                    </span>
                    <span class="counter">
                        <span id="wordCount">0</span> palavras
                    </span>
                </div>
                <span class="language-support">Suporta textos em português e inglês</span>
            </div>
        </section>

        <!-- Slider Section -->
        <section class="slider-section">
            <label class="slider-label">Número de palavras a extrair:</label>
            <div class="slider-container">
                <input 
                    type="range" 
                    class="slider" 
                    id="keywordCount" 
                    min="1" 
                    max="99" 
                    value="10"
                >
                <div class="slider-value" id="sliderValue">10</div>
            </div>
        </section>

        <!-- Extract Button -->
        <button class="extract-btn" id="extractBtn">
            <span class="btn-text">Extrair Palavras-Chave</span>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <span>Analisando seu texto...</span>
            </div>
        </button>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection">
            <h2 class="results-title">Palavras-Chave Encontradas:</h2>
            <div class="keywords-grid" id="keywordsGrid"></div>
            <div class="action-buttons">
                <button class="action-btn" id="copyBtn">
                    📋 Copiar todas
                </button>
                <button class="action-btn" id="downloadTxtBtn">
                    📄 Baixar .txt
                </button>
                <button class="action-btn" id="downloadCsvBtn">
                    📊 Baixar .csv
                </button>
                <button class="action-btn" id="downloadJsonBtn">
                    🔧 Baixar .json
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Kauã Vinicius 2° A</p>
        </footer>
    </div>

    <script>
        // Variables
        let extractedKeywords = [];
        
        // DOM Elements
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        const wordCount = document.getElementById('wordCount');
        const keywordCountSlider = document.getElementById('keywordCount');
        const sliderValue = document.getElementById('sliderValue');
        const extractBtn = document.getElementById('extractBtn');
        const loading = document.getElementById('loading');
        const btnText = document.querySelector('.btn-text');
        const resultsSection = document.getElementById('resultsSection');
        const keywordsGrid = document.getElementById('keywordsGrid');

        // Update counters
        function updateCounters() {
            const text = textInput.value;
            const chars = text.length;
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            
            charCount.textContent = chars;
            wordCount.textContent = words;
        }

        // Update slider value
        function updateSliderValue() {
            const value = keywordCountSlider.value;
            sliderValue.textContent = value;
            
            // Position the value indicator
            const percent = ((value - keywordCountSlider.min) / (keywordCountSlider.max - keywordCountSlider.min)) * 100;
            sliderValue.style.left = percent + '%';
        }

        // Extract keywords function
        function extractKeywords(text, count) {
            // Simple keyword extraction algorithm
            const stopWords = {
                pt: ['o', 'a', 'os', 'as', 'um', 'uma', 'uns', 'umas', 'de', 'do', 'da', 'dos', 'das', 'em', 'no', 'na', 'nos', 'nas', 'por', 'para', 'com', 'sem', 'sob', 'sobre', 'entre', 'até', 'desde', 'durante', 'através', 'e', 'ou', 'mas', 'porque', 'se', 'quando', 'onde', 'como', 'que', 'quem', 'qual', 'quanto', 'este', 'esta', 'estes', 'estas', 'esse', 'essa', 'esses', 'essas', 'aquele', 'aquela', 'aqueles', 'aquelas', 'meu', 'minha', 'meus', 'minhas', 'teu', 'tua', 'teus', 'tuas', 'seu', 'sua', 'seus', 'suas', 'nosso', 'nossa', 'nossos', 'nossas', 'vosso', 'vossa', 'vossos', 'vossas', 'muito', 'muita', 'muitos', 'muitas', 'pouco', 'pouca', 'poucos', 'poucas', 'todo', 'toda', 'todos', 'todas', 'outro', 'outra', 'outros', 'outras', 'mesmo', 'mesma', 'mesmos', 'mesmas', 'também', 'só', 'apenas', 'ainda', 'já', 'mais', 'menos', 'bem', 'mal', 'melhor', 'pior', 'maior', 'menor', 'sim', 'não', 'talvez'],
                en: ['the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i', 'it', 'for', 'not', 'on', 'with', 'he', 'as', 'you', 'do', 'at', 'this', 'but', 'his', 'by', 'from', 'they', 'she', 'or', 'an', 'will', 'my', 'one', 'all', 'would', 'there', 'their', 'we', 'him', 'been', 'has', 'had', 'which', 'more', 'when', 'who', 'oil', 'its', 'now', 'find', 'he', 'his', 'has', 'had', 'what', 'said', 'each', 'which', 'she', 'do', 'how', 'their', 'if', 'up', 'out', 'many', 'then', 'them', 'these', 'so', 'some', 'her', 'would', 'make', 'like', 'into', 'time', 'has', 'look', 'two', 'more', 'write', 'go', 'see', 'number', 'no', 'way', 'could', 'people', 'my', 'than', 'first', 'water', 'been', 'call', 'who', 'its', 'now', 'find', 'long', 'down', 'day', 'did', 'get', 'come', 'made', 'may', 'part']
            };

            // Clean and split text
            const words = text.toLowerCase()
                .replace(/[^\w\sáéíóúâêîôûãõçà]/g, ' ')
                .split(/\s+/)
                .filter(word => word.length > 2);

            // Count word frequency
            const wordCount = {};
            words.forEach(word => {
                if (!stopWords.pt.includes(word) && !stopWords.en.includes(word)) {
                    wordCount[word] = (wordCount[word] || 0) + 1;
                }
            });

            // Sort by frequency and return top keywords
            return Object.entries(wordCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, count)
                .map(([word, freq]) => ({ word, frequency: freq }));
        }

        // Display keywords
        function displayKeywords(keywords) {
            keywordsGrid.innerHTML = '';
            
            keywords.forEach((keyword, index) => {
                const card = document.createElement('div');
                card.className = 'keyword-card';
                card.innerHTML = `
                    <div class="keyword-rank">${index + 1}º</div>
                    <div class="keyword-text">${keyword.word}</div>
                `;
                keywordsGrid.appendChild(card);
                
                // Animate card appearance
                setTimeout(() => {
                    card.classList.add('show');
                }, index * 100);
            });
        }

        // Download functions
        function downloadFile(content, filename, contentType) {
            const blob = new Blob([content], { type: contentType });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
        }

        // Event Listeners
        textInput.addEventListener('input', updateCounters);
        keywordCountSlider.addEventListener('input', updateSliderValue);

        extractBtn.addEventListener('click', async () => {
            const text = textInput.value.trim();
            
            if (!text) {
                alert('Por favor, insira um texto para análise.');
                return;
            }

            // Show loading
            btnText.style.display = 'none';
            loading.style.display = 'flex';
            extractBtn.disabled = true;

            // Simulate processing time
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Extract keywords
            const keywordCount = parseInt(keywordCountSlider.value);
            extractedKeywords = extractKeywords(text, keywordCount);

            // Hide loading
            btnText.style.display = 'block';
            loading.style.display = 'none';
            extractBtn.disabled = false;

            // Display results
            displayKeywords(extractedKeywords);
            resultsSection.style.display = 'block';
            
            // Smooth scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Copy all keywords
        document.getElementById('copyBtn').addEventListener('click', () => {
            const keywordsList = extractedKeywords.map((k, i) => `${i + 1}. ${k.word}`).join('\n');
            navigator.clipboard.writeText(keywordsList).then(() => {
                alert('Palavras-chave copiadas!');
            });
        });

        // Download TXT
        document.getElementById('downloadTxtBtn').addEventListener('click', () => {
            const content = extractedKeywords.map((k, i) => `${i + 1}. ${k.word}`).join('\n');
            downloadFile(content, 'palavras-chave.txt', 'text/plain');
        });

        // Download CSV
        document.getElementById('downloadCsvBtn').addEventListener('click', () => {
            const header = 'Posição,Palavra,Frequência\n';
            const content = extractedKeywords.map((k, i) => `${i + 1},${k.word},${k.frequency}`).join('\n');
            downloadFile(header + content, 'palavras-chave.csv', 'text/csv');
        });

        // Download JSON
        document.getElementById('downloadJsonBtn').addEventListener('click', () => {
            const data = extractedKeywords.map((k, i) => ({
                posicao: i + 1,
                palavra: k.word,
                frequencia: k.frequency
            }));
            downloadFile(JSON.stringify(data, null, 2), 'palavras-chave.json', 'application/json');
        });

        // Initialize
        updateCounters();
        updateSliderValue();
    </script>
</body>
</html>